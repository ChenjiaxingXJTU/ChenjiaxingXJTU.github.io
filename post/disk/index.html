<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=generator content="Wowchemy 4.8.0 for Hugo"><meta name=author content="ç¬¼é¹°"><meta name=description content="ç»ˆäºè™šæ‹Ÿæœºç£ç›˜å®¹é‡ä¸å¤Ÿç”¨äº†"><link rel=alternate hreflang=en-us href=/post/disk/><link rel=preconnect href=https://fonts.gstatic.com crossorigin><meta name=theme-color content="#2962ff"><script src=/js/mathjax-config.js></script><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css integrity="sha256-FMvZuGapsJLjouA6k7Eo2lusoAX9i0ShlWFG6qt7SLc=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin=anonymous><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/github.min.css crossorigin=anonymous title=hl-light><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/styles/dracula.min.css crossorigin=anonymous title=hl-dark disabled><script src=https://cdnjs.cloudflare.com/ajax/libs/lazysizes/5.2.2/lazysizes.min.js integrity="sha512-TmDwFLhg3UA4ZG0Eb4MIyT1O1Mb+Oww5kFG0uHqXsdbyZz9DcvYQhKpGgNkamAI6h2lGGZq2X8ftOJvF/XjTUg==" crossorigin=anonymous async></script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js integrity crossorigin=anonymous async></script><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Montserrat:400,700%7CRoboto:400,400italic,700%7CRoboto+Mono&display=swap"><link rel=stylesheet href=/css/wowchemy.css><script async src="https://www.googletagmanager.com/gtag/js?id=UA-155136732-3"></script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
function trackOutboundLink(url,target){gtag('event','click',{'event_category':'outbound','event_label':url,'transport_type':'beacon','event_callback':function(){if(target!=='_blank'){document.location=url;}}});console.debug("Outbound link clicked: "+url);}
function onClickCallback(event){if((event.target.tagName!=='A')||(event.target.host===window.location.host)){return;}
trackOutboundLink(event.target,event.target.getAttribute('target'));}
gtag('js',new Date());gtag('config','UA-155136732-3',{});document.addEventListener('click',onClickCallback,false);</script><link rel=manifest href=/index.webmanifest><link rel=icon type=image/png href=/images/icon_hu0ad9a760d4acc21697f10ad9ba07207a_233385_32x32_fill_lanczos_center_2.png><link rel=apple-touch-icon type=image/png href=/images/icon_hu0ad9a760d4acc21697f10ad9ba07207a_233385_192x192_fill_lanczos_center_2.png><link rel=canonical href=/post/disk/><meta property="twitter:card" content="summary_large_image"><meta property="twitter:site" content="@ChenjiaxingXjtu"><meta property="twitter:creator" content="@ChenjiaxingXjtu"><meta property="og:site_name" content="ç¬¼é¹°çš„è‡ªä¹ å®¤"><meta property="og:url" content="/post/disk/"><meta property="og:title" content="linuxç£ç›˜æ‰©å®¹ | ç¬¼é¹°çš„è‡ªä¹ å®¤"><meta property="og:description" content="ç»ˆäºè™šæ‹Ÿæœºç£ç›˜å®¹é‡ä¸å¤Ÿç”¨äº†"><meta property="og:image" content="/post/disk/featured.png"><meta property="twitter:image" content="/post/disk/featured.png"><meta property="og:locale" content="en-us"><meta property="article:published_time" content="2020-10-07T00:00:00+00:00"><meta property="article:modified_time" content="2020-10-07T00:00:00+00:00"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"/post/disk/"},"headline":"linuxç£ç›˜æ‰©å®¹","image":["/post/disk/featured.png"],"datePublished":"2020-10-07T00:00:00Z","dateModified":"2020-10-07T00:00:00Z","author":{"@type":"Person","name":"ç¬¼é¹°"},"publisher":{"@type":"Organization","name":"ç¬¼é¹°çš„è‡ªä¹ å®¤","logo":{"@type":"ImageObject","url":"/images/icon_hu0ad9a760d4acc21697f10ad9ba07207a_233385_192x192_fill_lanczos_center_2.png"}},"description":"ç»ˆäºè™šæ‹Ÿæœºç£ç›˜å®¹é‡ä¸å¤Ÿç”¨äº†"}</script><html><head><meta name=baidu-site-verification content="code-sfn1yFAEKV"><title>ç¬¼é¹°çš„è‡ªä¹ å®¤</title><script>(function(){var bp=document.createElement('script');var curProtocol=window.location.protocol.split(':')[0];if(curProtocol==='https'){bp.src='https://zz.bdstatic.com/linksubmit/push.js';}else{bp.src='http://push.zhanzhang.baidu.com/push.js';}
var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(bp,s);})();</script><script>var _hmt=_hmt||[];(function(){var hm=document.createElement("script");hm.src="https://hm.baidu.com/hm.js?8bac0bb1daa46026753cf161e82b48ad";var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(hm,s);})();</script></head></html><title>linuxç£ç›˜æ‰©å®¹ | ç¬¼é¹°çš„è‡ªä¹ å®¤</title></head><body id=top data-spy=scroll data-offset=70 data-target=#TableOfContents><script>window.wcDarkLightEnabled=true;</script><script>const isSiteThemeDark=false;</script><script src=/js/load-theme.js></script><aside class=search-results id=search><div class=container><section class=search-header><div class="row no-gutters justify-content-between mb-3"><div class=col-6><h1>Search</h1></div><div class="col-6 col-search-close"><a class=js-search href=#><i class="fas fa-times-circle text-muted" aria-hidden=true></i></a></div></div><div id=search-box><input name=q id=search-query placeholder=Search... autocapitalize=off autocomplete=off autocorrect=off spellcheck=false type=search class=form-control></div></section><section class=section-search-results><div id=search-hits></div></section></div></aside><nav class="navbar navbar-expand-lg navbar-light compensate-for-scrollbar" id=navbar-main><div class=container><div class="d-none d-lg-inline-flex"><a class=navbar-brand href=/>ç¬¼é¹°çš„è‡ªä¹ å®¤</a></div><button type=button class=navbar-toggler data-toggle=collapse data-target=#navbar-content aria-controls=navbar aria-expanded=false aria-label="Toggle navigation">
<span><i class="fas fa-bars"></i></span></button><div class="navbar-brand-mobile-wrapper d-inline-flex d-lg-none"><a class=navbar-brand href=/>ç¬¼é¹°çš„è‡ªä¹ å®¤</a></div><div class="navbar-collapse main-menu-item collapse justify-content-start" id=navbar-content><ul class="navbar-nav d-md-inline-flex"><li class=nav-item><a class=nav-link href=/#about><span>Home</span></a></li><li class=nav-item><a class=nav-link href=/#posts><span>Posts</span></a></li><li class=nav-item><a class=nav-link href=/#projects><span>Projects</span></a></li><li class=nav-item><a class=nav-link href=/#contact><span>Contact</span></a></li></ul></div><ul class="nav-icons navbar-nav flex-row ml-auto d-flex pl-md-2"><li class=nav-item><a class="nav-link js-search" href=# aria-label=Search><i class="fas fa-search" aria-hidden=true></i></a></li><li class="nav-item dropdown theme-dropdown"><a href=# class=nav-link data-toggle=dropdown aria-haspopup=true><i class="fas fa-moon" aria-hidden=true></i></a><div class=dropdown-menu><a href=# class="dropdown-item js-set-theme-light"><span>Light</span></a>
<a href=# class="dropdown-item js-set-theme-dark"><span>Dark</span></a>
<a href=# class="dropdown-item js-set-theme-auto"><span>Automatic</span></a></div></li></ul></div></nav><div class="container-fluid docs"><div class="row flex-xl-nowrap"><div class="d-none d-xl-block col-xl-2 docs-toc"><ul class="nav toc-top"><li><a href=# id=back_to_top class=docs-toc-title>Table of Contents</a></li></ul><nav id=TableOfContents><ul><li><ul><li><a href=#èƒŒæ™¯>èƒŒæ™¯</a></li><li><a href=#å¿«é€Ÿäº†è§£lvm>å¿«é€Ÿäº†è§£LVM</a></li><li><a href=#ç¨å¾®æ·±å…¥ä¸€ä¸‹lvm>ç¨å¾®æ·±å…¥ä¸€ä¸‹LVM</a></li><li><a href=#æ‰©å®¹å’Œåˆ†åŒº>æ‰©å®¹å’Œåˆ†åŒº</a></li><li><a href=#lvmå·ç®¡ç†>lvmå·ç®¡ç†</a></li><li><a href=#æ‰©å±•æ ¹ç›®å½•>æ‰©å±•æ ¹ç›®å½•</a></li><li><a href=#å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™ï¼š</a></li></ul></li></ul></nav></div><main class="col-12 col-md-0 col-xl-10 py-md-3 pl-md-5 docs-content" role=main><article class=article><div class="article-container pt-3"><h1>linuxç£ç›˜æ‰©å®¹</h1><div class=article-metadata><div><span><a href=/author/%E7%AC%BC%E9%B9%B0/>ç¬¼é¹°</a></span></div><span class=article-date>2020-10-07</span>
<span class=middot-divider></span><span class=article-reading-time>2 min read</span>
<span class=middot-divider></span><span class=article-categories><i class="fas fa-folder mr-1"></i><a href=/category/%E6%8A%80%E6%9C%AF/>æŠ€æœ¯</a></span></div></div><div class=article-container><div class=article-style><h3 id=èƒŒæ™¯>èƒŒæ™¯</h3><p>ä½œä¸ºLinuxèœé¸Ÿï¼Œæ¯æ¬¡è£…Linuxæ“ä½œç³»ç»Ÿæ—¶æˆ‘éƒ½è¦åœ¨åˆ†åŒºè¿™ä¸€æ­¥ä¸ŠèŠ±äº›åŠŸå¤«æ€è€ƒï¼šæ€ä¹ˆåˆ’åˆ†æ¯”è¾ƒåˆé€‚ã€‚ï¼ˆæˆ‘çš„è¿‘æœŸéœ€æ±‚æ˜¯ä»€ä¹ˆ?æœªæ¥å¯èƒ½å‘ç”Ÿå˜åŒ–å—ï¼Ÿï¼‰å› ä¸ºåœ¨é€»è¾‘åˆ†åŒºåˆ’åˆ†å¥½åå°±å¾ˆéš¾æ›´æ”¹äº†ï¼Œä¸€æ—¦æŸä¸ªåˆ†åŒºç©ºé—´è€—å°½ä¼šå¾ˆéº»çƒ¦ã€‚ä¹‹å‰ç”¨EXSIç®¡ç†æœåŠ¡å™¨é‡Œçš„è™šæ‹Ÿæœºï¼Œå¯ä»¥ç›´æ¥åœ¨webæ§åˆ¶å°ä¸­åŠ¨æ€è°ƒæ•´å…¶ç£ç›˜å¤§å°ã€‚å¦‚æœæ˜¯vmware workstation proæˆ–è€…virtualboxçš„è™šæ‹Ÿæœºä¸€èˆ¬å°±ç”¨gpartedè°ƒæ•´åˆ†åŒº(è¿™ä¹ˆå¹²æœ‰ç‚¹å®³æ€•æåï¼Œæ“ä½œå‰æˆ‘ä¼šå¤‡ä»½ä¸€ä¸‹æ–‡ä»¶åˆ°ç§»åŠ¨ç¡¬ç›˜)ã€‚è‡ªä»å­¦ä¹ äº†LVMåï¼Œåˆ†åŒºç®¡ç†ä¸€ä¸‹å­å°±å˜å®¹æ˜“äº†ï¼Œç›´æ¥åœ¨CLIç»ˆç«¯æ“ä½œã€‚</p><h3 id=å¿«é€Ÿäº†è§£lvm>å¿«é€Ÿäº†è§£LVM</h3><p>ç®€å•æ¥è¯´LVMå°±æ˜¯å°†åº•å±‚çš„å¤šå—ç‰©ç†å·PVç»„æˆä¸€ä¸ªå­˜å‚¨æ± VGï¼Œç”¨æˆ·å¯ä»¥åœ¨å­˜å‚¨æ± ä¸Šåˆ›å»ºå¤šä¸ªé€»è¾‘å·LVï¼Œè¿™ä¸ªé€»è¾‘å·å°±ç›¸å½“äºwindowsä¸‹çš„ä¸€ä¸ªCç›˜æˆ–è€…åˆ«çš„ç›˜ï¼Œç”¨æˆ·å¯ä»¥å¾€é€»è¾‘å·ä¸Šè£…ç³»ç»Ÿæˆ–è€…å†™æ•°æ®ï¼Œæ•ˆæœç­‰åŒäºå†™ç‰©ç†å—ä¸Šã€‚</p><p>LVMæœ€å…³é”®çš„ç‚¹å°±æ˜¯è¿™ä¸ªé€»è¾‘å·ï¼Œè¿™æ˜¯LVMå¥½ç”¨çš„åŸå› ï¼Œå› ä¸ºLVMå¸®ç”¨æˆ·åšå¥½äº†æ˜ å°„ã€‚æˆ‘ä»¬åªéœ€è¦çŸ¥é“LVMæ˜¯åˆ©ç”¨Linuxå†…æ ¸çš„device-mapperåŠŸèƒ½æ¥å®ç°å­˜å‚¨ç³»ç»Ÿçš„è™šæ‹ŸåŒ–ï¼Œæ€§èƒ½å½±å“ä¸å¤§ã€‚LVMçš„å¾ˆå¤šå¥½å¤„éƒ½æ˜¯å› ä¸ºæœ‰è¿™ä¸ªæ˜ å°„åœ¨ã€‚</p><p>LVMæœ€å¤§çš„å¥½å¤„å°±æ˜¯å®ƒå¯ä»¥åœ¨çº¿ï¼ˆonlineï¼‰å¯¹é€»è¾‘å·ï¼ˆLVï¼‰å’Œå·ç»„ï¼ˆVGï¼‰è¿›è¡Œåˆ›å»ºã€åˆ é™¤ã€è°ƒæ•´å¤§å°ç­‰æ“ä½œã€‚æ— éœ€é‡æ–°å¯åŠ¨æœåŠ¡ï¼Œå°±å¯ä»¥å°†æœåŠ¡ä¸­ç”¨åˆ°çš„é€»è¾‘å·ï¼ˆLVï¼‰åœ¨çº¿ï¼ˆonlineï¼‰/åŠ¨æ€ï¼ˆliveï¼‰è¿ç§»è‡³åˆ«çš„ç¡¬ç›˜ä¸Šã€‚</p><p>å½“ç„¶è¿˜æœ‰äº›åˆ«çš„å¥½å¤„ï¼Œä¾‹å¦‚å…è®¸åˆ›å»ºå¿«ç…§ï¼Œæ”¯æŒå„ç§è®¾å¤‡æ˜ å°„ç›®æ ‡ï¼ˆdevice-mapper targetsï¼‰ã€‚</p><h3 id=ç¨å¾®æ·±å…¥ä¸€ä¸‹lvm>ç¨å¾®æ·±å…¥ä¸€ä¸‹LVM</h3><ul><li>MBRï¼ˆMaster Boot Recordï¼‰ï¼ˆä¸»å¼•å¯¼è®°å½•ï¼‰å’ŒGPTï¼ˆGUID Partition Tableï¼‰ï¼ˆGUIDæ„ä¸ºå…¨å±€å”¯ä¸€æ ‡è¯†ç¬¦ï¼‰æ˜¯åœ¨ç£ç›˜ä¸Šå­˜å‚¨åˆ†åŒºä¿¡æ¯çš„ä¸¤ç§ä¸åŒæ–¹å¼ã€‚</li></ul><ol><li>ä¼ ç»Ÿçš„MBRåˆ†åŒºæ–¹å¼æœ€å¤š4ä¸ªä¸»åˆ†åŒºï¼ˆ3ä¸ªä¸»åˆ†åŒº+1ä¸ªæ‰©å±•åˆ†åŒº(æ‰©å±•åˆ†åŒºé‡Œé¢å¯ä»¥æ”¾å¤šä¸ªé€»è¾‘åˆ†åŒº)ï¼‰ï¼Œæ— æ³•åˆ›å»ºå¤§äº2TBçš„åˆ†åŒºï¼Œä¸€èˆ¬ç”¨fdiskåˆ†åŒºå·¥å…·ã€‚</li><li>GPTåˆ†åŒºæ–¹å¼å°†ä¸ä¼šæœ‰è¿™ç§é™åˆ¶ï¼Œä¸€èˆ¬ä½¿ç”¨partedåˆ†åŒºï¼›</li></ol><ul><li>é€»è¾‘å·ç®¡ç†(LVM)ï¼Œæ˜¯ Logical Volume Managerï¼ˆé€»è¾‘å·ç®¡ç†ï¼‰çš„ç®€å†™ï¼Œlvmæ˜¯å·çš„ä¸€ç§ç®¡ç†æ–¹å¼ï¼Œå¹¶ä¸æ˜¯åˆ†åŒºå·¥å…·ï¼ˆä¹Ÿå¯ä¸é‡‡ç”¨è¿™ç§LVMç®¡ç†æ–¹å¼ï¼‰.</li></ul><p>LVMçš„åŸºæœ¬ç»„æˆéƒ¨åˆ†å¦‚ä¸‹ï¼š</p><ul><li>ç‰©ç†å· (PV)<br>ä¸€ä¸ªå¯ä¾›å­˜å‚¨LVMçš„å—è®¾å¤‡. ä¾‹å¦‚: ä¸€å—ç¡¬ç›˜, ä¸€ä¸ªMBRæˆ–GPTåˆ†åŒº, ä¸€ä¸ªå›ç¯æ–‡ä»¶, ä¸€ä¸ªè¢«å†…æ ¸æ˜ å°„çš„è®¾å¤‡ (ä¾‹å¦‚ dm-crypt)ã€‚PVåŒ…å«æœ‰ä¸LVMç›¸å…³çš„ç®¡ç†å‚æ•°</li><li>å·ç»„ (VG)<br><font color=red>ç‰©ç†å·PVç»„åˆæˆä¸€ä¸ªå­˜å‚¨æ± VGï¼Œä½œä¸ºå­˜æ”¾é€»è¾‘å·LVçš„å®¹å™¨</font>ã€‚ PEs are allocated from a VG for a LV.</li><li><strong>é€»è¾‘å· (LV)</strong><br><font color=red>&ldquo;è™šæ‹Ÿ/é€»è¾‘å·"å­˜æ”¾åœ¨ä¸€ä¸ªå·ç»„ä¸­,ç”±ç‰©ç†å—ç»„æˆã€‚</font>æ˜¯ä¸€ä¸ªç±»ä¼¼äºç‰©ç†è®¾å¤‡çš„å—è®¾å¤‡ï¼Œä¾‹å¦‚ï¼Œä½ å¯ä»¥ç›´æ¥åœ¨å®ƒä¸Šé¢åˆ›å»ºä¸€ä¸ªæ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿã€‚<strong>é€»è¾‘å·ä¸å¿…æ˜¯è¿ç»­çš„ç©ºé—´ï¼Œå®ƒå¯ä»¥è·¨è¶Šè®¸å¤šç‰©ç†å·ï¼Œå¹¶ä¸”å¯ä»¥åœ¨ä»»ä½•æ—¶å€™ä»»æ„çš„è°ƒæ•´å¤§å°ã€‚ç›¸æ¯”ç‰©ç†ç£ç›˜æ¥è¯´ï¼Œæ›´æ˜“äºç£ç›˜ç©ºé—´çš„ç®¡ç†</strong></li><li>ç‰©ç†å— (PE)<br>ä¸€ä¸ªå·ç»„ä¸­æœ€å°çš„è¿ç»­åŒºåŸŸ(é»˜è®¤ä¸º4 MiB)ï¼Œå¤šä¸ªç‰©ç†å—å°†è¢«åˆ†é…ç»™ä¸€ä¸ªé€»è¾‘å·ã€‚å¯ä»¥æŠŠå®ƒçœ‹æˆç‰©ç†å·çš„ä¸€éƒ¨åˆ†ï¼Œè¿™éƒ¨åˆ†å¯ä»¥è¢«åˆ†é…ç»™ä¸€ä¸ªé€»è¾‘å·ã€‚
<img src=https://img.linux.net.cn/data/attachment/album/201406/18/134408sa12dauefffyszfg.jpg alt></li></ul><p>ç®€å•ç†è§£ä¸€ä¸‹: æœ‰ä¸€å—ç‰©ç†ç¡¬ç›˜/dev/sdaï¼Œæˆ‘ä»¬ç”¨LVMç®¡ç†å®ƒã€‚ä¸€ä¸ªå·ç»„VGå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªè™šæ‹Ÿç¡¬ç›˜ï¼Œé€»è¾‘å·LVå¯ä»¥çœ‹æˆè™šæ‹Ÿç¡¬ç›˜ä¸Šçš„ç£ç›˜åˆ†åŒºï¼Œç±»ä¼¼äºCç›˜ã€Dç›˜ã€‚è€Œå·ç»„VGæ˜¯ç”±ä¸‹é¢çš„å¤šä¸ªç‰©ç†å·PVç»„æˆï¼Œç‰©ç†å·PVçš„åŸºæœ¬ç»„æˆå•ä½æ˜¯ç‰©ç†å—PEã€‚è€Œé€»è¾‘ä¸ç‰©ç†å®ä½“ä¹‹é—´æ˜ å°„å…³ç³»ä¸ç”¨ç®¡ã€‚</p><p><img src=https://s2.ax1x.com/2020/01/22/1AMidK.png alt=1AMidK.png>
å¦‚å›¾ï¼Œ50Gçš„ç¡¬ç›˜/dev/sdaï¼Œé»˜è®¤åªåˆ†é…äº†4Gç»™æ ¹ç›®å½•ï¼ˆçº¢è‰²å®çº¿ï¼‰ï¼Œåé¢ä¸å¤Ÿç”¨äº†å¯ä»¥åŠ¨æ€ä»VGé‡Œæ‹¨ç©ºé—´ã€‚</p><p>ä¸‹é¢å†æ¥çœ‹çœ‹LVMåœ¨baiduç™¾ç§‘ä¸Šçš„ä»‹ç»<font color=red><strong>LVM</strong></font>(Logical Volume Manager)é€»è¾‘åˆ†å·ç®¡ç†å™¨ï¼Œæœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªè™šæ‹Ÿè®¾å¤‡é©±åŠ¨ï¼Œæ˜¯åœ¨å†…æ ¸ä¸­å—è®¾å¤‡å’Œç‰©ç†è®¾å¤‡ä¹‹é—´æ·»åŠ çš„ä¸€ä¸ªæ–°çš„æŠ½è±¡å±‚æ¬¡ã€‚</p><h3 id=æ‰©å®¹å’Œåˆ†åŒº>æ‰©å®¹å’Œåˆ†åŒº</h3><ol><li>è™šæ‹Ÿæœºå…³æœºï¼Œåœ¨å®¿ä¸»æœºçš„vmwareç•Œé¢ä¸­ç¼–è¾‘è™šæ‹Ÿæœºè®¾ç½®ï¼Œç¡¬ä»¶/ç¡¬ç›˜/æ‰©å±•ç£ç›˜å®¹é‡ã€‚å¦‚æœæ‰©å±•é€‰é¡¹æ˜¯ç°è‰²çš„ï¼Œéœ€è¦åˆ é™¤å¿«ç…§æˆ–è€…ä½¿ç”¨vCenter Converterã€‚å¦‚æœå®¿ä¸»æœºæ˜¯linuxï¼Œå¯ä»¥ç”¨å‘½ä»¤æ‰©å±•ç£ç›˜ï¼švmware-vdiskmanager -x 16Gb xxx.vmdk</li><li>å¯åŠ¨è™šæ‹Ÿæœº</li></ol><pre><code class=language-bash># æŸ¥çœ‹ç¡¬ç›˜å®¹é‡ 
sudo fdisk -l
&gt; Disk /dev/sda: 21.5 GB, 21474836480 bytes
# æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ
df -lh 
&gt; å’Œæ‰©å®¹ä¹‹å‰ç»“æœä¸€æ ·ï¼Œå› ä¸ºè¿˜æ²¡æœ‰ç»™ç¡¬ç›˜åˆ†åŒº
# å¼€å§‹åˆ†åŒº
sudo fdisk /dev/sda
# ä¾æ¬¡è¾“å…¥
m ï¼ˆå‘½ä»¤æç¤ºï¼‰
p ï¼ˆæŸ¥çœ‹åˆ†åŒºï¼‰å‘ç°æœ‰ä¸‰ä¸ªç›˜ï¼Œlinuxç±»å‹çš„ä¸»åˆ†åŒºã€Extendedç±»å‹çš„ã€swapç±»å‹çš„ï¼Œblocksä¸ºç›˜çš„å¤§å°ï¼ˆå•ä½kBï¼‰
n ï¼ˆåˆ›å»ºåˆ†åŒºï¼‰
p (è®¾ä¸ºä¸»åˆ†åŒº)
3 (åˆ†åŒºid)
èµ·å§‹æ‰‡åŒº éœ€è¦è§‚å¯Ÿä¹‹å‰æŸ¥çœ‹åˆ†åŒºçš„ç¡¬ç›˜åˆ†å¸ƒæƒ…å†µï¼Œé€‰æ‹©æœ‰è¶³å¤Ÿå¤§ç©ºé—´çš„ä¸€æ®µ
ç»“æŸæ‰‡åŒº ç›´æ¥å›è½¦ï¼Œé»˜è®¤æ˜¯å°†è¿™æ®µç©ºç™½å­˜å‚¨å…¨éƒ¨åˆ†ç»™æ–°åˆ†åŒº
t ï¼ˆä¿®æ”¹ç±»å‹ï¼Œ8eä¸ºlvmï¼Œ83ä¸ºlinuxï¼‰
8e
w (å†™åˆ†åŒºè¡¨)
# åˆ†åŒºç»“æŸï¼Œå›åˆ°ç»ˆç«¯ç»§ç»­æ“ä½œ
sudo partprobe /dev/sda
sudo mkfs.ext4 /dev/sda3
</code></pre><h3 id=lvmå·ç®¡ç†>lvmå·ç®¡ç†</h3><pre><code class=language-bash>sudo apt install lvm2
# è¿›å…¥lvmç®¡ç†
sudo lvm
# æŸ¥çœ‹ç‰©ç†å·PV
pvdisplay æˆ– pvscan
# åˆ›å»ºPV
pvcreate /dev/sda3
# æŸ¥çœ‹å·ç»„VG
vgdisplay -v
# åˆ›å»ºVGï¼Œç‰©ç†å·åŠ å…¥å·ç»„
vgcreate vg /dev/sda3
# åˆ›å»ºé€»è¾‘å·LV
sudo lvcreate -n lv -L 12G vg
# åœ¨LVä¸Šåˆ›å»ºæ–‡ä»¶ç³»ç»Ÿ
sudo mkfs.ext4 /dev/ubuntu/lv

# é€»è¾‘å·çš„UUID
blkid /dev/vg/lv
mkdir /home/vl
# æ’å…¥ç›¸åº”çš„æ¡ç›®/etc/fstab
UUID=b85df913-580f-461c-844f-546d8cde4646 /home/vl	ext4 defaults 0 0
# æŒ‚è½½
sudo mount /home/vl
</code></pre><p>ç”¨df -hå’Œpvdisplayä»¥åŠfdisk -læŸ¥çœ‹ç»“æœã€‚</p><blockquote><p>Disk identifier: 0x00000000
Disk /dev/mapper/vg-lv doesn&rsquo;t contain a valid partition table</p></blockquote><p>è¿™ä¸ªæ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºvg-lvæ˜¯é€»è¾‘å·ã€‚æœ¬æ¥å°±ä¸åº”è¯¥æœ‰åˆ†åŒºè¡¨çš„ã€‚</p><h3 id=æ‰©å±•æ ¹ç›®å½•>æ‰©å±•æ ¹ç›®å½•</h3><p><font color=red>å‰é¢æ˜¯å°†æ•´ä¸ªè™šæ‹Ÿæœºç¡¬ç›˜æ‰©å®¹ï¼Œç„¶ååˆ›å»ºä¸€ä¸ªlvmç±»å‹çš„ç‰©ç†å·/dev/sda3ï¼Œç„¶åä¸ºå®ƒåˆ›å»ºå¯¹åº”çš„vgï¼Œlvå’Œæ–‡ä»¶ç³»ç»Ÿæ ¼å¼åŒ–ï¼Œå¹¶ä¸”åŠ¨æ€è°ƒæ•´lvçš„å®¹é‡</font></p><div class="alert alert-note"><div>å¦‚æœå®‰è£…ç³»ç»Ÿæ—¶ç›´æ¥æŠŠlvmæŒ‚è½½åœ¨æ ¹ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºlvå’Œvgã€‚åœ¨å·ç®¡ç†æ­¥éª¤ä¸­è‡ªå·±ä¸ç”¨å†åˆ›å»ºLVå’ŒVGï¼Œåªè¦åˆ›å»ºPVã€‚</div></div><pre><code class=language-bash># å°†æ–°å¢çš„ç‰©ç†ç›˜åŠ å…¥æ ¹ç›®å½•æ‰€åœ¨çš„é€»è¾‘å·
vgextend ubuntu--vg-ubuntu--lv /dev/xxx

# æ‰©å±•æ–‡ä»¶ç³»ç»Ÿæ‰€åœ¨é€»è¾‘å·ç»„
lvextend -L +20G /dev/mapper/ubuntu--vg-ubuntu--lv #è‹¥æç¤ºNo space left on deviceï¼Œè€ƒè™‘å…ˆæš‚æ—¶å°†æœ¬åœ°æ²¡ç”¨çš„æ–‡ä»¶åˆ é™¤æˆ–ç§»å‡ºåˆ°ç§»åŠ¨ç¡¬ç›˜ï¼Œæ‰©å®¹åç§»å›
æˆ–è€…
lvextend -L +100% /dev/mapper/ubuntu--vg-ubuntu--lv #å¦‚æœå‰é¢vmwareæ–°å¢äº†20Gï¼Œè¿™é‡Œæ–°å¢20Gåˆ°lvå¤§æ¦‚ç‡ä¼šå‡ºé”™ï¼Œå®é™…èƒ½ç”¨åˆ°çš„ç©ºé—´ä¼šæ¯”ä¹‹å‰çš„å°ä¸€ç‚¹ç‚¹ã€‚ä¸æ¸…æ¥šï¼Œå¯ä»¥ç”¨ç™¾åˆ†æ•°ä»£æ›¿ã€‚

# ä½¿æ‰©å®¹ç”Ÿæ•ˆ
sudo resize2fs -p /dev/mapper/ubuntu--vg-ubuntu--lv  
</code></pre><p>å¦‚æœå®‰è£…ç³»ç»Ÿæ—¶æ²¡æœ‰é€‰lvmæŒ‚è½½æ ¹ç›®å½•ï¼Œæ¡Œé¢linuxç³»ç»Ÿå»ºè®®ä½¿ç”¨partedï¼Œå®ƒæ”¯æŒå¤šç§åˆ†åŒºè¡¨ç±»å‹ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºã€åˆ é™¤ã€è°ƒæ•´ã€ç¼©å‡ã€ç§»åŠ¨å’Œå¤åˆ¶åˆ†åŒºï¼Œä»¥åŠé‡æ–°ç»„ç»‡ç¡¬ç›˜çš„ä½¿ç”¨ï¼Œå¤åˆ¶æ•°æ®åˆ°æ–°çš„ç¡¬ç›˜ä¸Šã€‚gparted æ˜¯ parted çš„å›¾å½¢ç•Œé¢å‰ç«¯</p><p>sudo apt-get install parted</p><p><img src=https://s1.ax1x.com/2020/04/12/GLTotK.png alt=GLTotK.png></p><p>å¦‚å›¾æ‰€ç¤ºï¼Œç°åœ¨çš„æƒ…å†µä¸å…è®¸ç›´æ¥æŠŠunallocatedçš„åŒºé—´åˆ†é…ç»™sda1ï¼Œå› ä¸ºåŒºé—´ä¸è¿ç»­ã€‚ç§»åŠ¨åŒºé—´æ­¥éª¤å¦‚ä¸‹</p><ol><li>å³å‡»sda5(linux-swap)ï¼Œç‚¹å‡»swapoffã€‚æŠŠğŸ”’å»é™¤ã€‚æ¥ç€è¿›è¡Œ2~4æ­¥å°†unallocatedçš„åŒºé—´é€æ­¥ç§»åˆ°sda1(/)çš„æ—è¾¹ã€‚</li><li>å³å‡»sda2(extended)ï¼Œå°†free space followingè®¾ä¸º0ï¼Œæˆ–è€…æ‹–åŠ¨æ»‘å—ã€‚ä½¿å¾—unallocatedåŒ…å«è¿›sda2</li><li>å³å‡»sda5ï¼Œå°†free space followingè®¾ä¸º0ã€‚è¿™æ—¶ä¼šå¼¹å‡ºè­¦å‘Šï¼Œç‚¹okï¼Œå¿½ç•¥å®ƒã€‚</li><li>å³å‡»sda2ï¼Œå°†new sizeè®¾ä¸ºlinux-swapçš„å¤§å°ï¼Œä½¿å¾—unllocatedç»§ç»­ä¸Šç§»ã€‚</li><li>å³å‡»sda1ï¼Œç”±äºç©ºé—²åŒºé—´å·²ç»åœ¨æ—è¾¹äº†ï¼Œè°ƒæ•´å¤§å°ã€‚</li><li>ç‚¹å‡»apply all operationså›¾æ ‡ã€‚</li></ol><p>é€€å‡ºç¨‹åºåï¼Œdf -hæŸ¥çœ‹ã€‚æ•´ä¸ªè¿‡ç¨‹å…¶å®ä¹Ÿæ²¡æœ‰é‡å¯ã€‚
<img src=https://s1.ax1x.com/2020/04/12/GLbpQg.png alt=GLbpQg.png></p><h3 id=å‚è€ƒèµ„æ–™>å‚è€ƒèµ„æ–™ï¼š</h3><ol><li><a href=https://gtcsq.readthedocs.io/en/latest/linux_tools/ubuntu_lvm_extend.html>https://gtcsq.readthedocs.io/en/latest/linux_tools/ubuntu_lvm_extend.html</a></li><li><a href=https://baike.baidu.com/item/LVM>https://baike.baidu.com/item/LVM</a></li><li><a href=https://www.cnblogs.com/hester/p/11439353.html>https://www.cnblogs.com/hester/p/11439353.html</a>
Did you find this page helpful? Consider sharing it ğŸ™Œ</li></ol></div><div class=article-tags><a class="badge badge-light" href=/tag/linux/>linux</a></div><div class=share-box aria-hidden=true><ul class=share><li><a href="https://twitter.com/intent/tweet?url=/post/disk/&text=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9" target=_blank rel=noopener class=share-btn-twitter><i class="fab fa-twitter"></i></a></li><li><a href="https://www.facebook.com/sharer.php?u=/post/disk/&t=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9" target=_blank rel=noopener class=share-btn-facebook><i class="fab fa-facebook"></i></a></li><li><a href="mailto:?subject=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9&body=/post/disk/" target=_blank rel=noopener class=share-btn-email><i class="fas fa-envelope"></i></a></li><li><a href="https://www.linkedin.com/shareArticle?url=/post/disk/&title=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9" target=_blank rel=noopener class=share-btn-linkedin><i class="fab fa-linkedin-in"></i></a></li><li><a href="whatsapp://send?text=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9%20/post/disk/" target=_blank rel=noopener class=share-btn-whatsapp><i class="fab fa-whatsapp"></i></a></li><li><a href="https://service.weibo.com/share/share.php?url=/post/disk/&title=linux%e7%a3%81%e7%9b%98%e6%89%a9%e5%ae%b9" target=_blank rel=noopener class=share-btn-weibo><i class="fab fa-weibo"></i></a></li></ul></div><div class="media author-card content-widget-hr"><a href=/><img class="avatar mr-3 avatar-circle" src=/author/%E7%AC%BC%E9%B9%B0/avatar_hud1d7835fdb4144130bc67370de929981_31535_270x270_fill_q90_lanczos_center.jpg alt=ç¬¼é¹°></a><div class=media-body><h5 class=card-title><a href=/>ç¬¼é¹°</a></h5><h6 class=card-subtitle>Javaåç«¯å¼€å‘</h6><ul class=network-icon aria-hidden=true><li><a href=/#contact><i class="fas fa-envelope"></i></a></li><li><a href=https://github.com/ChenjiaxingXJTU target=_blank rel=noopener><i class="fab fa-github"></i></a></li><li><a href=https://gitlab.com/ChenjiaxingXJTU target=_blank rel=noopener><i class="fab fa-gitlab"></i></a></li><li><a href=https://twitter.com/ChenjiaxingXJTU target=_blank rel=noopener><i class="fab fa-twitter"></i></a></li><li><a href=https://www.instagram.com/ChenjiaxingXJTU/ target=_blank rel=noopener><i class="fab fa-instagram"></i></a></li><li><a href=https://www.facebook.com/ChenjiaxingXJTU target=_blank rel=noopener><i class="fab fa-facebook"></i></a></li><li><a href=https://telegram.me/ChenjiaxingXJTU target=_blank rel=noopener><i class="fab fa-telegram"></i></a></li><li><a href=https://www.linkedin.com/in/ChenjiaxingXJTU/ target=_blank rel=noopener><i class="fab fa-linkedin"></i></a></li></ul></div></div><section id=comments><div id=disqus_thread></div><script>let disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='https://'+"chenjiaxing"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></section><div class="article-widget content-widget-hr"><h3>Related</h3><ul><li><a href=/post/routeflow/>RouteFlow</a></li><li><a href=/post/onos/>bazelç¼–è¯‘onoså‡ºé”™</a></li><li><a href=/post/ovs/>ovsé—®é¢˜æ€»ç»“</a></li><li><a href=/post/website/>ä¸ªäººåšå®¢ç»´æŠ¤å‡ºç°çš„é—®é¢˜</a></li><li><a href=/post/mirror/>åŠ å¿«apt/maven/bazel/npm/pipæ‹‰å–é€Ÿåº¦</a></li></ul></div></div></article></main></div></div><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.4/imagesloaded.pkgd.min.js integrity="sha256-lqvxZrPLtfffUl2G/e7szqSvPBILGbwmsGE1MKlOi0Q=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.6/isotope.pkgd.min.js integrity="sha256-CBrpuqrMhXwcLLUd5tvQ4euBHCdh7wGlDfNz8vbu/iI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/instant.page/5.1.0/instantpage.min.js integrity="sha512-1+qUtKoh9XZW7j+6LhRMAyOrgSQKenQ4mluTR+cvxXjP1Z54RxZuzstR/H9kgPXQsVB8IW7DMDFUJpzLjvhGSQ==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mermaid/8.8.0/mermaid.min.js integrity="sha512-ja+hSBi4JDtjSqc4LTBsSwuBT3tdZ3oKYKd07lTVYmCnTCor56AnRql00ssqnTOR9Ss4gOP/ROGB3SfcJnZkeg==" crossorigin=anonymous title=mermaid></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/highlight.min.js integrity="sha512-TDKKr+IvoqZnPzc3l35hdjpHD0m+b2EC2SrLEgKDRWpxf2rFCxemkgvJ5kfU48ip+Y+m2XVKyOCD85ybtlZDmw==" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.2.0/languages/r.min.js></script><script>const code_highlighting=true;</script><script>const search_config={"indexURI":"/index.json","minLength":1,"threshold":0.3};const i18n={"no_results":"No results found","placeholder":"Search...","results":"results found"};const content_type={'post':"Posts",'project':"Projects",'publication':"Publications",'talk':"Talks",'slides':"Slides"};</script><script id=search-hit-fuse-template type=text/x-template>
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script><script src=https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin=anonymous></script><script src=https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin=anonymous></script><script src=/js/wowchemy.min.4c2bca31150ce93c5a5e43b8a50f22fd.js></script><div class=container><footer class=site-footer><p class=powered-by><span xmlns:dct=http://purl.org/dc/terms/ property="dct:title">This work</span> by <a xmlns:cc=http://creativecommons.org/ns# href=/#about property="cc:attributionName" rel=cc:attributionurl>Jiaxing Chen</a> is licensed under a <a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution-ShareAlike 4.0 International License</a>.<br><a target=_blank href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=61010302000452" style=display:inline-block;text-decoration:none;height:20px;line-height:20px><img src=/img/å…¬ç½‘å®‰.png style=float:left>é™•å…¬ç½‘å®‰å¤‡ 61010302000452å·</a><br>&copy; 2020</p><p class=powered-by>Published with
<a href=https://wowchemy.com target=_blank rel=noopener>Wowchemy</a> â€”
the free, <a href=https://github.com/wowchemy/wowchemy-hugo-modules target=_blank rel=noopener>open source</a> website builder that empowers creators.
<span class=float-right aria-hidden=true><a href=# class=back-to-top><span class=button_icon><i class="fas fa-chevron-up fa-2x"></i></span></a></span></p></footer></div><div id=modal class="modal fade" role=dialog><div class=modal-dialog><div class=modal-content><div class=modal-header><h5 class=modal-title>Cite</h5><button type=button class=close data-dismiss=modal aria-label=Close>
<span aria-hidden=true>&#215;</span></button></div><div class=modal-body><pre><code class="tex hljs"></code></pre></div><div class=modal-footer><a class="btn btn-outline-primary my-1 js-copy-cite" href=# target=_blank><i class="fas fa-copy"></i>Copy</a>
<a class="btn btn-outline-primary my-1 js-download-cite" href=# target=_blank><i class="fas fa-download"></i>Download</a><div id=modal-error></div></div></div></div></div></body></html>